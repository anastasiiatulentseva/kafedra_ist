- provide(:title, "Adding new teacher schedule")
%h1.page-header New teachers schedule

= form_tag({ controller: 'teachers_schedules' }, method: 'post', id: "schedule_form") do
  .form-group
    %label.control-label Choose start date
    .form-inline
      = date_field_tag 'week', Date.today, name: "date", class: "form-control"
      = submit_tag 'Save schedule', class: 'btn btn-primary pull-right'
  #schedule_table.table-responsive
    %table.table.table-striped.table-condensed.table-bordered
      %thead
        %tr.fixed_headers
          %th
            Teacher
          - @days.each do |day|
            %th
              = day
      %tbody
        - @teachers.each do |teacher|

          - 5.times do |para|
            %tr
              - if para == 0
                %td(rowspan='5')
                  = teacher.name
              - 5.times do |day|
                %td{id: "#{teacher.id}_#{day + 1}_#{para + 1}"}
                  .form-inline
                    .form-group
                      = select_tag 'subject', options_from_collection_for_select(teacher.teacher_profile.subjects, :id, :name),
                        include_blank: true,
                        class: "form-control input-sm", name: "schedule[#{teacher.id}][#{day + 1}][#{para + 1}][subject]"
                    .form-group
                      = text_field_tag 'room', nil, {name: "schedule[#{teacher.id}][#{day + 1}][#{para + 1}][room]", size: 3, class: "form-control input-sm"}
  = submit_tag 'Save schedule', class: 'btn btn-primary pull-right'
